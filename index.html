<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DATACORE AESTHETIC</title>
    <style>
        :root {
            --text-main: #ffffff;
            --glow-yellow: #FFD700; 
            --glow-red: #FF0033;    
            --lock-safe: #00ff9d;   
            --lock-edit: #ff0f4b;
            --sync-blue: #00C6FF;
            --bg-deep: #020617;
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            margin: 0; padding: 0;
            color: var(--text-main);
            font-family: 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            background: linear-gradient(180deg, #0f172a 0%, #020617 100%);
        }

        /* --- Header --- */
        .app-header { padding: 40px 0 20px 0; text-align: center; }

        /* --- AESTHETIC LOGO DESIGN --- */
        .logo {
            font-size: 38px;
            font-weight: 900;
            letter-spacing: 8px; /* Wide spacing for premium look */
            text-transform: uppercase;
            
            /* Gradient Text Fill */
            background: linear-gradient(135deg, #ffffff 0%, #00C6FF 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            
            /* Soft Neon Glow */
            filter: drop-shadow(0 0 15px rgba(0, 198, 255, 0.4));
            
            margin-bottom: 25px;
            display: inline-block;
        }

        /* --- PRO SYNC PANEL --- */
        .sync-panel {
            background: rgba(2, 6, 23, 0.95);
            border: 1px solid #1e293b;
            margin: 0 20px 20px 20px;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0,0,0,0.6);
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .panel-state { display: none; width: 100%; animation: fadeIn 0.4s ease; }
        .panel-state.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* OFFLINE MENU */
        .offline-menu { display: flex; gap: 10px; justify-content: center; }
        .main-btn {
            flex: 1; padding: 14px; border-radius: 10px;
            font-weight: 800; font-size: 12px; letter-spacing: 1px;
            text-transform: uppercase; cursor: pointer;
            border: 1px solid #334155; color: #fff; background: #1e293b;
            transition: 0.2s;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .main-btn:hover { background: #334155; }
        .main-btn.gen { border-color: var(--sync-blue); color: var(--sync-blue); box-shadow: 0 4px 15px rgba(0, 198, 255, 0.1); }
        .main-btn.imp { border-color: var(--glow-yellow); color: var(--glow-yellow); box-shadow: 0 4px 15px rgba(255, 215, 0, 0.1); }
        .main-btn:active { transform: scale(0.98); }

        /* KEY CARD */
        .key-card {
            background: linear-gradient(135deg, #0f172a 0%, #020617 100%);
            border: 1px solid var(--sync-blue);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 0 20px rgba(0, 198, 255, 0.15);
        }
        
        .key-label { font-size: 10px; color: var(--sync-blue); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 8px; opacity: 0.8; }
        
        .key-value-box {
            background: rgba(0, 0, 0, 0.5); border: 1px dashed #334155;
            padding: 12px; border-radius: 8px; margin-bottom: 12px;
            font-family: 'Courier New', monospace; font-size: 16px; color: #fff;
            letter-spacing: 1px; word-break: break-all; user-select: all;
        }

        .card-actions { display: flex; gap: 10px; }
        .card-btn { flex: 1; padding: 10px; border-radius: 6px; border: none; font-weight: bold; cursor: pointer; font-size: 12px; }
        .btn-copy { background: var(--sync-blue); color: #000; }
        .btn-close { background: #334155; color: #fff; }

        /* LOGIN INPUT */
        .login-box { display: flex; gap: 10px; }
        .login-input {
            flex: 1; background: #000; border: 1px solid #333; color: #fff;
            padding: 12px; border-radius: 8px; text-align: center;
            font-family: monospace; font-size: 14px;
        }
        .login-input:focus { border-color: var(--glow-yellow); outline: none; }
        .login-go-btn {
            background: var(--glow-yellow); color: #000; border: none;
            padding: 0 20px; font-weight: bold; border-radius: 8px; cursor: pointer;
        }

        /* ONLINE HEADER */
        .online-header {
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(0, 255, 157, 0.05); border: 1px solid var(--lock-safe);
            padding: 12px 15px; border-radius: 12px;
        }
        .status-text { color: var(--lock-safe); font-weight: 800; font-size: 12px; display: flex; align-items: center; gap: 8px; letter-spacing: 1px; }
        .dot { width: 8px; height: 8px; background: var(--lock-safe); border-radius: 50%; box-shadow: 0 0 8px var(--lock-safe); }
        
        .online-actions { display: flex; gap: 8px; }
        
        .sm-btn {
            padding: 8px 14px; border-radius: 6px; font-size: 11px; font-weight: bold; cursor: pointer;
            border: 1px solid #334155; background: #0f172a; color: #fff; transition: 0.2s;
        }
        .sm-btn:hover { background: #1e293b; }
        .sm-btn.show-key { border-color: var(--sync-blue); color: var(--sync-blue); }
        .sm-btn.connect-new { border-color: var(--glow-yellow); color: var(--glow-yellow); }

        /* --- LOCK TOGGLE --- */
        .lock-wrapper { display: flex; justify-content: center; margin-bottom: 20px; }
        .cyber-toggle {
            position: relative; width: 240px; height: 50px;
            background: #020617; border-radius: 50px; border: 1px solid #1e293b;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; overflow: hidden; transition: all 0.4s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
        }
        .cyber-toggle::before { content: ''; position: absolute; top: 0; bottom: 0; width: 50%; transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); z-index: 1; opacity: 0.2; }
        
        .cyber-toggle:not(.unlocked) { border-color: var(--lock-safe); box-shadow: 0 0 15px rgba(0, 255, 157, 0.1); }
        .cyber-toggle:not(.unlocked)::before { left: 0; background: var(--lock-safe); box-shadow: 0 0 20px var(--lock-safe); }
        .cyber-toggle:not(.unlocked) .toggle-text { color: var(--lock-safe); text-shadow: 0 0 8px rgba(0, 255, 157, 0.6); }
        
        .cyber-toggle.unlocked { border-color: var(--lock-edit); box-shadow: 0 0 15px rgba(255, 15, 75, 0.1); }
        .cyber-toggle.unlocked::before { left: 0; transform: translateX(100%); background: var(--lock-edit); box-shadow: 0 0 20px var(--lock-edit); }
        .cyber-toggle.unlocked .toggle-text { color: var(--lock-edit); text-shadow: 0 0 8px rgba(255, 15, 75, 0.6); }

        .toggle-text { position: relative; z-index: 2; font-size: 13px; font-weight: 800; letter-spacing: 2px; text-transform: uppercase; }

        /* --- Buttons List --- */
        .action-section { padding: 10px 20px; width: 100%; max-width: 500px; margin: 0 auto 20px auto; }
        .action-list { display: flex; flex-direction: column; gap: 15px; }

        .cyber-btn {
            width: 100%; padding: 20px 25px; border-radius: 12px;
            display: flex; align-items: center; justify-content: space-between;
            font-size: 15px; font-weight: 800; text-transform: uppercase;
            color: #fff; cursor: pointer; position: relative; overflow: hidden;
            background: rgba(30, 41, 59, 0.4); border: 1px solid rgba(255,255,255,0.05);
            transition: all 0.2s ease; backdrop-filter: blur(5px);
        }
        .cyber-btn.has-data {
            border: 1px solid var(--glow-yellow);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.15), inset 0 0 20px rgba(255, 215, 0, 0.05);
            background: rgba(255, 215, 0, 0.02);
        }
        .cyber-btn.has-data span { color: var(--glow-yellow); text-shadow: 0 0 12px rgba(255, 215, 0, 0.6); }
        .cyber-btn.has-data .count-bubble { background: var(--glow-red); color: #fff; box-shadow: 0 0 10px var(--glow-red); }
        .cyber-btn.empty { opacity: 0.3; pointer-events: none; border-style: dashed; border-color: #334155; }
        .count-bubble { background: #1e293b; color: #94a3b8; padding: 4px 10px; border-radius: 4px; font-size: 13px; font-weight: 900; min-width: 35px; text-align: center; }

        .rename-input { width: 100%; padding: 18px; border-radius: 12px; background: #0f172a; border: 1px solid #334155; color: #fff; font-weight: bold; text-align: center; text-transform: uppercase; font-size: 14px; }
        .rename-input:focus { border-color: var(--glow-yellow); }

        /* --- Cards --- */
        .cards-section { padding: 0 20px; max-width: 500px; margin: 0 auto; width: 100%; }
        .card { background: #020617; border: 1px solid #1e293b; border-radius: 16px; padding: 20px; margin-bottom: 25px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5); }
        .card-header { display: flex; justify-content: space-between; margin-bottom: 15px; font-size: 12px; color: #64748b; font-weight: 700; letter-spacing: 1px; }
        .input-wrapper { position: relative; width: 100%; height: 160px; background: #000; border-radius: 12px; border: 1px solid #1e293b; overflow: hidden; }
        .input-area { width: 100%; height: 100%; background: transparent; border: none; color: #ccc; padding: 15px; font-family: monospace; resize: none; font-size: 14px; }
        .privacy-mask { position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 10; }
        .mask-filled { background: #000; }
        .mask-filled .mask-icon { font-size: 30px; margin-bottom: 10px; }
        .mask-filled .mask-text { color: var(--glow-yellow); font-weight: bold; letter-spacing: 1px; font-size: 13px; text-shadow: 0 0 10px rgba(255, 215, 0, 0.4); }
        .mask-empty { background: rgba(255,255,255,0.02); }
        .mask-empty .mask-icon { opacity: 0.2; font-size: 24px; margin-bottom: 8px;}
        .mask-empty .mask-text { opacity: 0.2; font-size: 12px; }
        .card-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 15px; }
        .tool-btn { background: #1e293b; border: 1px solid #334155; color: #94a3b8; padding: 8px 16px; border-radius: 8px; font-size: 11px; font-weight: bold; cursor: pointer; }
        .tool-btn:hover { border-color: #64748b; color: #fff; }
        .tool-btn.delete:hover { border-color: var(--lock-edit); color: var(--lock-edit); }
        .footer { margin-top: auto; padding: 40px; text-align: center; color: #475569; font-size: 12px; }
        .footer a { color: #64748b; text-decoration: none; }

        @keyframes flashEffect { 0% { background: #fff; border-color: #fff; transform: scale(0.98); } 100% { background: transparent; transform: scale(1); } }
        .clicked { animation: flashEffect 0.2s ease-out; }
        .clicked span { color: #fff !important; text-shadow: none !important; }

    </style>
</head>
<body>

    <div class="app-header">
        <div class="logo">DATACORE</div>

        <!-- SYNC PANEL -->
        <div class="sync-panel">
            
            <!-- STATE 1: OFFLINE MENU -->
            <div id="state-offline" class="panel-state active">
                <div class="offline-menu">
                    <button class="main-btn gen" onclick="uiGoToGenerate()">
                        <span>+</span> GENERATE KEY
                    </button>
                    <button class="main-btn imp" onclick="uiGoToLogin()">
                        <span>‚ûú</span> CONNECT KEY
                    </button>
                </div>
            </div>

            <!-- STATE 2: GENERATE / SHOW KEY CARD -->
            <div id="state-keycard" class="panel-state">
                <div class="key-card">
                    <div class="key-label">YOUR SECURE KEY</div>
                    <div class="key-value-box" id="displayKey">Loading...</div>
                    <div class="card-actions">
                        <button class="card-btn btn-copy" onclick="copyKeyFromCard()">COPY & CLOSE</button>
                        <button class="card-btn btn-close" onclick="closeKeyCard()">HIDE</button>
                    </div>
                </div>
            </div>

            <!-- STATE 3: CONNECT INPUT -->
            <div id="state-login" class="panel-state">
                <div class="login-box">
                    <input type="text" id="loginKeyInput" class="login-input" placeholder="PASTE KEY HERE">
                    <button class="login-go-btn" onclick="logicLogin()">GO</button>
                </div>
            </div>

            <!-- STATE 4: ONLINE DASHBOARD -->
            <div id="state-online" class="panel-state">
                <div class="online-header">
                    <div class="status-text"><div class="dot"></div> ONLINE</div>
                    <div class="online-actions">
                        <button class="sm-btn show-key" onclick="uiShowCurrentKey()">SHOW KEY</button>
                        <button class="sm-btn connect-new" onclick="uiGoToLogin()">CONNECT</button>
                    </div>
                </div>
            </div>

        </div>
        
        <div class="lock-wrapper">
            <div class="cyber-toggle" id="lockToggle">
                <span class="toggle-text" id="lockText">SYSTEM LOCKED</span>
            </div>
        </div>
    </div>

    <div class="action-section">
        <div class="action-list" id="actionBar"></div>
    </div>

    <div class="cards-section" id="cardsContainer"></div>

    <div class="footer">
        UI Designed by <a href="https://t.me/Luizzsec">@Luizzsec</a>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, onValue, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
          apiKey: "AIzaSyB2d2mTzSq4zmy07I2RIqMGEwJI-1myQks",
          authDomain: "datacore-95310.firebaseapp.com",
          databaseURL: "https://datacore-95310-default-rtdb.firebaseio.com",
          projectId: "datacore-95310",
          storageBucket: "datacore-95310.firebasestorage.app",
          messagingSenderId: "154743386874",
          appId: "1:154743386874:web:e540693be39fafd4b34f43"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        window.db = db;
        window.ref = ref;
        window.set = set;
        window.onValue = onValue;
        window.dispatchEvent(new Event('firebase-ready'));
    </script>

    <script>
        const CONFIG = [
            { id: 'slot1', type: 'Email',  title: 'EMAIL SLOT 1' },
            { id: 'slot2', type: 'Email',  title: 'EMAIL SLOT 2' },
            { id: 'slot3', type: 'Email',  title: 'EMAIL SLOT 3' },
            { id: 'slot4', type: 'Email',  title: 'EMAIL SLOT 4' },
            { id: 'slot5', type: 'Email',  title: 'EMAIL SLOT 5' },
            { id: 'slot6', type: 'Name',   title: 'NAME LIST' },
            { id: 'slot7', type: 'Number', title: 'NUMBER LIST' }
        ];

        let appState = { locked: true, cloudMode: false, uid: null, data: {} };
        let saveTimeout;

        // INITIALIZATION
        window.addEventListener('firebase-ready', () => { initApp(); });

        function initApp() {
            const storedUID = localStorage.getItem('datacore_uid');
            if (storedUID) {
                appState.cloudMode = true;
                appState.uid = storedUID;
                switchPanel('state-online');
                connectToCloud(storedUID);
            } else {
                loadLocalData();
                switchPanel('state-offline');
            }
        }

        function switchPanel(stateId) {
            document.querySelectorAll('.panel-state').forEach(el => el.classList.remove('active'));
            document.getElementById(stateId).classList.add('active');
        }

        // --- BUTTON ACTIONS ---

        // 1. GENERATE NEW
        window.uiGoToGenerate = () => {
            const newID = 'user_' + Math.random().toString(36).substr(2, 9);
            
            localStorage.setItem('datacore_uid', newID);
            appState.uid = newID;
            appState.cloudMode = true;
            if(window.db) window.set(window.ref(window.db, 'users/' + newID), appState.data);
            connectToCloud(newID);

            document.getElementById('displayKey').innerText = newID;
            switchPanel('state-keycard');
        };

        // 2. SHOW KEY
        window.uiShowCurrentKey = () => {
            document.getElementById('displayKey').innerText = appState.uid;
            switchPanel('state-keycard');
        };

        // 3. COPY & CLOSE
        window.copyKeyFromCard = () => {
            const keyText = document.getElementById('displayKey').innerText;
            doCopy(keyText);
            switchPanel('state-online');
        };

        // 4. HIDE
        window.closeKeyCard = () => {
            switchPanel('state-online');
        };

        // 5. GO TO LOGIN SCREEN
        window.uiGoToLogin = () => {
            switchPanel('state-login');
            setTimeout(() => document.getElementById('loginKeyInput').focus(), 100);
        };

        // 6. CONNECT
        window.logicLogin = () => {
            const key = document.getElementById('loginKeyInput').value.trim();
            if(key.length < 5) return alert("Invalid Key");

            localStorage.setItem('datacore_uid', key);
            appState.uid = key;
            appState.cloudMode = true;

            switchPanel('state-online');
            connectToCloud(key);
            
            document.getElementById('loginKeyInput').value = "";
        };

        // --- COPY HELPER ---
        function doCopy(text) {
            const txt = document.createElement('textarea');
            txt.value = text;
            document.body.appendChild(txt);
            txt.select();
            document.execCommand('copy');
            document.body.removeChild(txt);
            
            // Feedback
            const btn = document.querySelector('.btn-copy');
            const original = btn.innerText;
            btn.innerText = "COPIED!";
            setTimeout(() => btn.innerText = original, 1000);
        }

        // --- DATA & SYNC ---

        function loadLocalData() {
            const localData = localStorage.getItem('datacore_local_v1');
            if (localData) appState.data = JSON.parse(localData);
            else resetData();
            validateData();
            render();
        }

        function connectToCloud(uid) {
            window.onValue(window.ref(window.db, 'users/' + uid), (snapshot) => {
                const val = snapshot.val();
                if (val) appState.data = val;
                else {
                    if(!appState.data.slot1) resetData();
                    window.set(window.ref(window.db, 'users/' + uid), appState.data);
                }
                render();
            });
        }

        function saveData() {
            if (appState.cloudMode && appState.uid) {
                clearTimeout(saveTimeout);
                saveTimeout = setTimeout(() => {
                    window.set(window.ref(window.db, 'users/' + appState.uid), appState.data);
                }, 800);
            } else {
                localStorage.setItem('datacore_local_v1', JSON.stringify(appState.data));
            }
        }

        function validateData() { if(Object.keys(appState.data).length !== CONFIG.length) resetData(); }
        function resetData() { appState.data = {}; CONFIG.forEach(item => { appState.data[item.id] = { title: item.title, content: "" }; }); }

        // --- RENDER UI ---

        function render() { 
            const activeId = document.activeElement ? document.activeElement.id : null;
            renderHeader(); 
            renderButtons(); 
            renderCards(); 
            if (activeId) {
                const el = document.getElementById(activeId);
                if (el) el.focus();
            }
        }

        function renderHeader() {
            const toggle = document.getElementById('lockToggle');
            const text = document.getElementById('lockText');
            if(appState.locked) { toggle.classList.remove('unlocked'); text.innerText = 'SYSTEM LOCKED'; }
            else { toggle.classList.add('unlocked'); text.innerText = 'EDIT MODE ACTIVE'; }
        }

        function renderButtons() {
            const container = document.getElementById('actionBar');
            container.innerHTML = '';
            CONFIG.forEach(item => {
                const itemData = appState.data[item.id] || { title: item.title, content: "" };
                const count = getCount(itemData.content);
                const hasData = count > 0;
                const isEditable = item.id.startsWith('slot1') || item.id.startsWith('slot2') || item.id.startsWith('slot3') || item.id.startsWith('slot4') || item.id.startsWith('slot5');

                if (appState.locked) {
                    const btn = document.createElement('button');
                    btn.className = `cyber-btn ${hasData ? 'has-data' : 'empty'}`;
                    btn.id = `btn-${item.id}`;
                    btn.innerHTML = `<span>${itemData.title}</span><span class="count-bubble">${count}</span>`;
                    if(hasData) btn.onclick = () => copyItem(item.id);
                    container.appendChild(btn);
                } else {
                    if (isEditable) {
                        const input = document.createElement('input');
                        input.className = 'rename-input';
                        input.id = 'rename-' + item.id;
                        input.value = itemData.title;
                        input.placeholder = 'RENAME';
                        input.oninput = (e) => { appState.data[item.id].title = e.target.value; saveData(); };
                        container.appendChild(input);
                    } else {
                        const div = document.createElement('div');
                        div.className = 'rename-input'; div.style.color = '#444'; div.style.borderColor = '#222';
                        div.innerText = itemData.title;
                        container.appendChild(div);
                    }
                }
            });
        }

        function renderCards() {
            const container = document.getElementById('cardsContainer');
            container.innerHTML = '';
            CONFIG.forEach(item => {
                const itemData = appState.data[item.id] || { title: item.title, content: "" };
                const count = getCount(itemData.content);
                const hasData = count > 0;
                const showMask = appState.locked; 
                
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-header"><span>${itemData.title}</span><span>${item.type.toUpperCase()}</span></div>
                    <div class="input-wrapper">
                        <div class="privacy-mask ${hasData ? 'mask-filled' : 'mask-empty'}" style="display: ${showMask ? 'flex' : 'none'}">
                            ${hasData ? `<div class="mask-icon">üîê</div><div class="mask-text">DATA HIDDEN</div>` : `<div class="mask-icon">üìÇ</div><div class="mask-text">PASTE DATA</div>`}
                        </div>
                        <textarea id="input-${item.id}" class="input-area" style="display: ${showMask ? 'none' : 'block'}" placeholder="Paste list here..." oninput="updateData('${item.id}', this.value)">${itemData.content}</textarea>
                    </div>
                    <div class="card-actions" style="display: ${appState.locked ? 'none' : 'flex'}">
                        <input type="file" id="file-${item.id}" hidden accept=".txt" onchange="uploadFile('${item.id}', this)">
                        <button class="tool-btn" onclick="document.getElementById('file-${item.id}').click()">üìÇ UPLOAD</button>
                        <button class="tool-btn delete" onclick="clearData('${item.id}')">üóë CLEAR</button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        document.getElementById('lockToggle').addEventListener('click', () => { appState.locked = !appState.locked; render(); });
        window.updateData = (id, val) => { appState.data[id].content = val; saveData(); };
        window.copyItem = (id) => {
            const content = appState.data[id].content;
            if(!content) return;
            const lines = content.split(/\r?\n/).filter(l => l.trim() !== "");
            if(lines.length === 0) return;
            const item = lines[0];
            const remaining = lines.slice(1).join("\n");
            
            doCopy(item);

            appState.data[id].content = remaining;
            saveData();
            render();
            setTimeout(() => { const btn = document.getElementById(`btn-${id}`); if(btn) { btn.classList.add('clicked'); setTimeout(() => btn.classList.remove('clicked'), 250); } }, 10);
        };
        window.clearData = (id) => { appState.data[id].content = ""; saveData(); render(); };
        window.uploadFile = (id, input) => {
            const file = input.files[0];
            if(!file) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                const current = appState.data[id].content || "";
                const newItem = e.target.result;
                appState.data[id].content = current ? current + "\n" + newItem : newItem;
                appState.data[id].content = appState.data[id].content.trim();
                saveData();
                render();
            };
            reader.readAsText(file);
        };
        function getCount(txt) { if(!txt) return 0; return txt.split(/\r?\n/).filter(l => l.trim() !== "").length; }
    </script>
</body>
</html>